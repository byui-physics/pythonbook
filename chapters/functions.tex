\chapter{Functions and Libraries}
\label{chap:Functions}

One of the most fundamental constructs for any programming language is
the function. A function is nothing more than a set of instructions
packaged up and given a name.  The function can be as long and complex
or short and succinct as you wish.

The main purpose of a function is to take in information, do some calculations or other things, then produce a result.  Here's a function you should already be comfortable with:
\begin{Verbatim}
print('Print is a function.')
\end{Verbatim}
The \code{print} function takes a string, and tells the computer to write that string to the console.  You do not need to know all of the details of how a function works in order to use it.  You just need to know what to give it, and what the result is.

All Python functions have the same general format: first you type the name of the function (\code{print}), then you put round parentheses \code{()} around whatever information you are giving to the function.  If a function needs more than one piece of information, you separate them with a comma:
\begin{Verbatim}
x=[1,2,3]
y=[4,5,6]
zipped=zip(x,y) #Join two lists into one, item by item
print(zipped)
\end{Verbatim}

You can think of a function as a
black box. Someone created the contents of the box, specified what
information needs to enter the box for it to be able to accomplish
its task, and what information will exit the box.  Why a black box?
Well, one benefit of functions is that the user doesn't need to
know what's inside.  They only need to know what information the box
need and what information the box will give back to her.

Python functions generally fall into three groups: functions that come standard with Python (called native functions), functions that you can import into Python, and functions that you write yourself.

\section{Native functions}
There are a few functions that are always ready to go whenever you run Python. They are included with the
programming language.  We call these functions native
functions.  You have already been using some
of them, like these
\begin{Verbatim}
len(mylist)  # Returns the length of a list.
float(5)     # Converts an integer to a float.
str(67.3)    # Converts a float to a string.
\end{Verbatim}
The functions: \code{len}, \code{float}, and \code{str} are all
built-in functions, and they each take a single argument.  Other
built-in function are found in the margin tables in the previous section.






\section{Imported Functions and Libraries}
Many times, you will need to go beyond what Python can do by itself\sidenote{For example, Python doesn't include \code{sin()} and \code{cos()} as Native functions.}. However, that doesn't mean you have to create everything you need to do from scratch.  Most likely, the function that you need has already been coded. Somebody
else created the function and made it available to anyone
who wants it.  Groups of functions that perform similar tasks are
typically bundled together into libraries. These libaries can be
imported and the functions that they contain can be used.

It is critical that you know what information(variables) the function expects you to give it and what
useful information the function will give back to you.  This
information can be found in the library's documentation. Most libraries have great documentation with lists of the included functions, what the functions do, what the functions expect, and examples on how to use the most common ones.  You can usually find the library documentation by searching the internet for the library's name, plus "Python documentation".

Providing a complete list of all available libraries and function is well beyond
the scope of this book. Instead, we'll illustrate how to import
functions and use them.  As you use Python more and more you
should get in the habit of searching out the appropriate library to
accomplish the task at hand. When faced with a task to accomplish,
your first thought should be, `` I'll bet somebody has already done that.
I'm going to try to find that library.''



Let's see how to import libraries and use their functions\sidenote{Using the functions inside a libary requires that you know what
functions are available.  This information is usually available in the
library's documentation.  Google will be a great resource here.}. You've
already seen how to perform very simple mathematical calculations. ($5/6, 8^4$,
etc..)  For more complex
mathematical calculations, like $\sin(\frac{\pi}{2})$ or $e^{2.5}$,
you'll need to import these functions from a library.
\begin{Verbatim}
import math
\end{Verbatim}
This imports a library called \code{math}.  This command is like telling to go get the \code{math} book off of the shelf.  Functions inside the
math library can be used like this
\begin{Verbatim}
math.sqrt(5.2)  # Take the square root of 5.2
math.pi         # Get the value of pi
math.sin(34)    # Find the sine of 34 radians
\end{Verbatim}
The \code{math.} before each function is equivalent to telling Python "Use the \code{sqrt()} function that you find in the \code{math} book I told you to grab." If you just type
\begin{Verbatim}
sqrt(5.2)
\end{Verbatim}
Python won't know where to find the \code{sqrt} function and will give you an error.



A library can be imported and then called by a different name like
this:
\begin{Verbatim}
import math as mt
\end{Verbatim}
Here, the short name \code{mt} was chosen for this library.  This tells Python "I'm going to call the \code{math} book \code{mt}."
The desired functions can then be called like this
\begin{Verbatim}
mt.sqrt(5.2)  # Take the square root of 5.2
mt.pi         # Get the value of pi
mt.sin(34)    # Find the sine of 34 radians
\end{Verbatim}

Sometimes you may not want to import the entire library, just a few
functions. This can be done like this
\begin{Verbatim}
from math import sqrt,sin,pi
\end{Verbatim}
This code tells Python "Go grab \code{sqrt}, \code{sin}, and \code{pi} from the \code{math} book.  Then, you can use the \code{sqrt} and \code{sin} functions
without the library name before it, like this
\begin{Verbatim}
sqrt(5.5)
sin(pi)
\end{Verbatim}
but, you will only have access to the functions you imported, not all of the functions in the \code{math} library.

If you want to import every function inside of a library and not have to use a prefix, do this\sidenote{For larger libraries, importing all of the
  functions this way can take a long time.  A better choice is to import only
  the functions that you need.  You will also get some unexpected results if you use this method to import two different libraries that have functions with the same name.}
\begin{Verbatim}
from math import *
\end{Verbatim}
Now, every function contained in \code{math} is available without
needing the \code{math.} prefix in front of it.

\section{User-defined functions}
Sometimes, you will need to do something over and over again that you
can't find in a library.  You (the programmer) will need to write your
own function. You do it like this:
\begin{Verbatim}
def myFunction(a,b):
    c = a + b
    d = 3.0 * c
    f = 5.0 * d**4
    return f
\end{Verbatim}
This function performs several simple calculations and then uses the
\code{return} statement to pass the final result back out of the
function.(what exits the black box) Every user-defined function must
begin with the keyword \code{def} followed by the function name (you
can choose it). Python does not use an \code{end} statement or
anything like it to signal the end of a function.  Instead, it looks
for indentation to determine where the function ends.


The function can be called like this
\begin{Verbatim}
def myFunction(a,b):
    #Everything that is part of the function
    #needs to be indented.
    c = a + b
    d = 3.0 * c
    f = 5.0 * d**4
    return f
#The rest of this code is not part of this function.
r = 10
t = 15
result = myFunction(r,t)
\end{Verbatim}
In this case, when the function is called, \code{a} gets assigned the
value of $10$ and \code{b} gets assigned the value of $15$.  The
result of this calculation (\code{f}) is passed out of the function
and stored in the variable \code{result} for later use.  


A word on local vs. global variables is in order here.  In the example
above, the variables: \code{a},\code{b},\code{c},\code{d}, and
\code{f} are \ul{local variables}.  This means that these variables
are used by the function when it is called and then immediately
forgotten.  To see what I mean try the following and observe the
results

\begin{Verbatim}
result = myFunction(r,t)
print(c)
\end{Verbatim}
Notice the error since Python does not remember that inside the function \code{c=a+b}.

In contrast, the variables \code{r},\code{t}, and \code{result} are
called \ul{global variables}, which means that Python remembers these
assignments from anywhere, including inside of functions.  So,
technically, you could do the following:

\begin{Verbatim}
g = 9.8         #<--- g defined to be a global variable
def myFunction(a,b):
    c = a + g   # <--- Notice the reference to ``g'' here
    d = 3.0 * c
    f = 5.0 * d**4
    return f
#The rest of this code is not part of this function.
r = 10
t = 15
result = myFunction(r,t)
\end{Verbatim}
and there would be no error.  Notice that \code{g} has been defined as
a \ul{global variable}, and the function \code{myFunction} knows it's
value and can use it in a calculation.  \textbf{\ul{ Using global
    variables is usually considered to be bad form and confusing.}}
If you are going to use global variables there better be a very good
reason.  For example, assigning physical constant, like $k_B$, $G$, or
$\epsilon_0$, to be global variables is one example of proper use
because their values never change and may be used repeatedly in
multiple functions.  Generally speaking however, every variable that
is used in a function ought to be either i) passed in, or ii) defined
inside of the function.

Let's look at one more example.  Here's (roughly) what Python does
every time you use \code{math.sin(x)}:
\begin{Verbatim}
def sin(x):
    from math import factorial
    result=0
    for k in range(20): #This Starts a "for loop"
        sign=(-1)**k
        denom=factorial(2*k+1)
        result+=sign*x**(2*k+1)/denom
    return result
\end{Verbatim}
This function takes in a number (\code{x}) and returns the sine of \code{x}.  When you use \code{sin()}, the rest of your program has no idea that the variables \code{result}, \code{k}, \code{sign}, and \code{denom} were assigned along the way.  The main program only knows that \code{sin()} took \code{x} and returned a number that has the value of $\sin(x)$.




