\chapter{Loops and Logic}
\label{chap:LoopsLogic}

Loops are an essential part of programming a computer. A loop is a set
of instructions to be performed repeatedly until some criteria is met
or until the data being looped over is exhausted.

\section{For Loops}
A \texttt{for} loop is a good choice when you know exactly what things you want
to loop over before hand.  Here is an example of a \texttt{for} loop
used to add up the elements of a 4-element list:
\begin{Verbatim}
thesum = 0
for i in [3,2,1,9.9]:
    thesum = thesum + i
\end{Verbatim} 
Here you are {\it iterating} over the list \texttt{[3,2,1,9.9]}.  This
means that the loop variable (\texttt{i} in this case) gets assigned
the values of the list elements, one by one, until it reaches the end
of the list.  You can iterate over lists, arrays, and
matrices.\sidenote{Technically, an interable is an object that has a
  member function called \texttt{next}, but unless you
  understand classes, this is probably confusing to you.}  The list
that you iterate over can contain anything.\sidenote{Once again,
  notice that Python uses indentation to determine what the contents
  of the loop are.}  For instance, here is a loop over a list of
strings:
\begin{Verbatim}
for i in ['Physics', 'is','so','fun']:
    print i
\end{Verbatim} 
You can use a function to generate the list that you want to iterate
over
\begin{Verbatim}
for i in range(5,50,3):  #Range function will generate a list
    print i
\end{Verbatim} 
The \texttt{range} function doesn't allow your step size to be smaller
than $1$, which means that you could never use it to generate a list
like this \texttt{0.1..0.2..0.3..} etc.  To do this you'll want to use the
\texttt{arange} function inside of \texttt{numpy}, like this:
\begin{Verbatim}
from numpy import arange
for i in arange(5,50,.1):
    print i
\end{Verbatim} 
These examples are so simple that you might wonder when a loop might
actually be useful to you.  Let's see if we can build a loop to
calculate the following sum:
\begin{equation}
\Sigma_{n=1}^{1000} \frac{1}{n^2}
\end{equation}
\begin{Verbatim}
theSum = 0
for n in range(1,1000):
    theSum = theSum + 1/n**2
print theSum
\end{Verbatim}
Here, \texttt{n} is being assigned the values
\texttt{1,2,3,4....1000}, one by one, until it gets all the way to
\texttt{1000}.  Each time through the loop, \texttt{n} is different
and the expression \texttt{1/n**2} evaluates to a new value.  The
variable \texttt{theSum} is updated each time through to be the
running total of all calculations performed thus far.  Here's another
example of a loop used to calculate the value of $20!$:
\begin{Verbatim}
theProduct = 1
for n in range(1,21):  
    theProduct = theProduct * n
print theSum
\end{Verbatim}
Remember that the range function creates a list starting at $1$, going
up to $21$ but not including it. The math library has a function
called \texttt{factorial} that does the same thing.  Let's use it to
check our answer:
\marginpar{\footnotesize\captionsetup{type=table}
  %\vspace{-2.5in}
\begin{tabular}{lp{1.05in}}
\texttt{==}  &  Equal\\ \\
\texttt{!=}  &  Not equal\\ \\
\texttt{>=}  &  Greater than or equal\\ \\
\texttt{>}  &  Greater than\\ \\
\texttt{<=}  &  Less than or equal\\ \\
\texttt{\&\&}  &  and\\ \\
\texttt{|}  &  or\\ \\
\texttt{!}  &  not\\ \\
\end{tabular}
\captionof{table}{Python's logic elements.\label{tab:Logicelements}}
}

\begin{Verbatim}
from math import factorial
factorial(20)
\end{Verbatim}

\section{Logical Statements}
 Often we only want to do something when some condition is satisfied.
This requires the use of logic.  The simplest logic is the \texttt{if}
statement, which works like this:
\begin{Verbatim}
a = 1
b = 3
if a > 0:
    c = 1
else:
    c = 0

if a >= 0 | b >= 0:  # If condition 1 met
    c = a + b
elif a > 0 and b >= 0:  #If condition 2 met
    c = a - b
else:  # If neither condition is met.
    c = a * b
\end{Verbatim}
Study the examples above until it makes sense.  Any logical statement
can be constructed out of the elements in table
\ref{tab:Logicelements}

\section{While Loops}
Logic can be combined with loops using something called a
\texttt{while} loop.  A \texttt{while} loop is a good choice when you
don't know beforehand exactly how many iterations of the loop will be
executed but rather want the loop to contiune to execute until some
condition is met.  As an example, let's compute the sum 
\begin{equation}
\sum \frac{1}{n^2}
\end{equation}
by looping until the terms become smaller than $\num{1e-10}$.
\begin{Verbatim}
term = 1  # Load the first term in the sum
s = term  # Initialize the sum 
n = 1     # Set a counter
while term > 1e-10:  # Loop while term is bigger than 1e-10
    n = n + 1        #Add 1 to n so that it will count: 2,3,4,5
    term = 1./n**2    # Calculate the next term to add
    s = s + term     # Add 1/n^2 to the running total
\end{Verbatim} 
This loop will continue to execute until \texttt{term}<1e-10. Note
that unlike the for loop, here you have to do your own counting, being
careful about what value n starts at and when it is incremented
(\texttt{n=n+1}). Also notice that \texttt{term} must be assigned
prior to the start of the loop.  If it wasn't the loop's first logical
test would fail and the loop wouln't execute at all.

Sometimes \texttt{while} loops are awkward to use because you can get
stuck in an infinite loop if your check condition is never false. The
\texttt{break} command is designed to help you here. When
\texttt{break} is executed in a loop the script jumps to just after
the end at the bottom of the loop. The \texttt{break} command also
works with for loops. Here is our sum loop rewritten with break
\begin{Verbatim}
term = 1  # Load the first term in the sum
s = term  # Initialize the sum 
n = 1     # Set a counter
while term > 1e-10:  # Loop while term is bigger than 1e-10
    n = n + 1        #Add 1 to n so that it will count: 2,3,4,5
    term = 1./n**2    # Calculate the next term to add
    s = s + term     # Add 1/n^2 to the running total
    if n > 1000:
        print 'This is taking too long. I''m outta here...'
        break
\end{Verbatim} 
